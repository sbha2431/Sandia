
Performing surveillance, that is, tracking the location of an adversarial target, has many applications in patrolling and defense, especially in combination with other objectives, such as providing certain services or accomplishing a mission. 

When dealing with a possibly adversarial target, a strategy for the surveying agent for achieving its objective can be seen as a strategy in a two-player game between the agent and the target. Since the agent may not always observe, or even know, the exact location of the target, surveillance is, by its very nature, a partial information problem.
It is thus natural to reduce surveillance strategy synthesis to computing a winning strategy for the agent in a two-player partial-information game against the target. Game-based models for related problems have been extensively studied in the literature. Notable examples include pursuit-evasion games~\cite{Chung2011}, patrolling games~\cite{Basilico12}, and graph-searching games~\cite{Kreutzer11}, where the problem is formulated as enforcing eventual detection, which is, in its essence a search problem -- once the target is detected, the game ends. For many applications, this formulation is too restrictive. Often, the goal is not to detect or capture the target, but to maintain certain level of information about its location over an unbounded (or infinite) time duration, or, alternatively, be able to obtain sufficiently precise information over and over again. In other cases, the agent has an additional objective, such as performing certain task, which might prevent him from capturing the target, but allow for satisfying a more relaxed surveillance objective.

In this paper, we study the problem of synthesizing strategies for enforcing \emph{temporal surveillance objectives}, such as the requirement to never let the agent's uncertainty about the target's location exceed a given threshold, or recapturing the target every time it escapes. To this end, we consider surveillance objectives specified in Linear Temporal Logic (LTL), equipped with basic surveillance predicates. This also allows for a seamless combination with other task specifications. Our computational model is that of a two-player game played on a finite graph, whose nodes represent the possible locations of the agent and the target, and whose edges model the possible (deterministic) moves between locations. The agent plays the game with partial information, as it can only observe the target when  it is in it's area of sight. The target, on the other hand, always has full information about the agent's location, even when the agent is not in sight. In that way, we consider a model with one-sided partial information, making the computed strategy for the agent robust against a potentially more powerful adversary. 

We formulate surveillance strategy synthesis as the the problem of computing a winning strategy for the agent in a partial-information game with a surveillance objective. There is a rich theory of partial information games with LTL objectives~\cite{DoyenR11,Chatterjee2013}, and it is well known that even for very simple objectives the synthesis problem is EXPTIME-complete~\cite{Reif84,BerwangerD08}. Moreover, all the standard algorithmic solutions to the problem are based on some form of \emph{belief set construction}, which transforms the imperfect-information game into a perfect-information game which may be exponentially larger, since the new set of states is the powerset of the original one. Thus, such approaches scale poorly in general, and are not applicable in most practical situations.

We address this problem by using \emph{abstraction}. We introduce an \emph{abstract belief set construction}, which underapproximates the information-tracking abilities of the agent (or, alternatively, overapproximates its belief, i.e., the set of positions it knows the target could be in). Using this construction we reduce surveillance synthesis to a two-player perfect-information game with LTL objective, which we then solve using off-the shelf reactive synthesis tools~\cite{EhlersR16}. Our construction guarantees that the abstraction is sound, that is, if a surveillance strategy is found in the abstract game, it corresponds to a surveillance strategy for the original game. If, on the other hand, such a strategy is not found, then the method automatically checks if this is due to the coarseness of the abstraction, in which case the abstract belief space is automatically refined. Thus, our method follows the general Counterexample Guided Abstraction Refinement (CEGAR)~\cite{ClarkeGJLV00} scheme, which has successfully demonstrated its potential in formal verification and reactive synthesis.

{\bf Contributions.} We make the following contributions:\\
(1) We propose a \emph{formalization of surveillance objectives} as temporal logic specifications, and frame surveillance strategy synthesis  as a partial-information reactive synthesis problem.\\
(2) We develop an \emph{abstraction method that soundly approximates} surveillance strategy synthesis, thus enabling the application of efficient techniques for reactive synthesis.\\
(3) We design procedures that \emph{automatically refine a given abstraction} in order to improve its precision when no surveillance strategy exists due to coarseness of the approximation.\\
(4) We evaluate our approach on different surveillance objectives (safety, liveness) combined with task specifications, and discuss the qualitatively different behaviour of the synthesized strategies for the different kinds of specifications.

{\bf Related work.}
While closely related to the surveillance problem we consider, pursuit-evasion games with partial information~\cite{Chung2011, Chin2010, Antoniades2003} formulate the problem as eventual detection, and do not consider combinations with other mission specifications. Other work, such as \cite{Vidal2002} and \cite{Kim2001}, incorporates additionally map building during pursuit in an unknown environment, but again solely for target detection.

Synthesis from LTL specifications~\cite{Pnueli1989}, especially from formulae in the efficient GR(1) fragment~\cite{Piterman2006}, has been extensively used in robotic planning (e.g.~\cite{wong2012,Kress2007}), but surveillance-type objectives, such as the ones we study here, have not been considered so far. Epistemic logic specifications~\cite{MeydenV98} can refer to the knowledge of the agent about the truth-value of logical formulas, but, contrary to our surveillance specifications, are not capable of expressing requirements on the size of the agent's uncertainty.

CEGAR has been developed for verification~\cite{ClarkeGJLV00}, and later for control~\cite{HenzingerJM03}, of LTL specifications. 
It has also been extended to infinite-state partial-information games~\cite{DimitrovaF08}, and used for sensor design~\cite{FuDT14}, both in the context of safety specifications. In addition to being focused on safety objectives, the refinement method in~\cite{DimitrovaF08} is designed to provide the agent with just enough information to achieve safety, and is thus not applicable to surveillance properties whose satisfaction depends on the size of the belief sets.

%Performing surveillance on an adversarial target, by its very nature, is a partial information problem. The agent may not always know the position of the target. However, surveillance in conjunction with a mission specification can be crucial in applications such as defense where it is important to keep track of (potentially hostile) targets whilst trying to satisfy a particular objective. 

%Since we are dealing with an adversarial target, a natural setting for formulating the problem is a two-player game. There are several flavours of partial information games that have been studied in the literature \cite{Chatterjee2013}, and in this paper we focus on turn-based one-sided partial-observation deterministic games on which we perform reactive control synthesis. It is one-sided as we allow the adversary full information on the location of the agent even if it is not in sight. 

%Related work in dealing with surveillance type objectives are pursuit-evasion games. There are several methods in formulating the problem such as enforcing eventual detection (at which point the game ends) \cite{Chen2010} or not allowing the target to move more than a certain distance away (\cite{keylist}). Partial information version of these games have also been studied in \cite{Antoniades2003,keylist} where it is shown that there is no existence theory for optimal solutions. However, these approaches treat the surveillance requirement as a search problem - once the target is detected the game is over. Work done by \cite{Vidal2002} and \cite{Kim2001} also include map building during pursuit but again with the sole purpose of target detection. Additionally, we do not enforce the requirement that the target(s) be detected. It is sufficient if we are able to bound our belief of the location below a user specified threshold for an infinite execution which allows for more richer, and more complex, behaviour than standard pursuit-evasion. So while there is work in pursuit-evasion games with partial information \cite{Chen2010} and even unknown environments \cite{Vidal2002}, these do not deal with additional mission specifications and also do not allow for the target to 'escape' and be recaptured as will be necessary in a setting with objectives beyond only capture.

%Our aim is to then synthesize a reactive controller that satisfies both the LTL specification as well as the surveillance objective. While it has been shown that for a general LTL specification, the synthesis problem is doubly exponential in the length of the formula \cite{Pnueli1989}, the work in \cite{Piterman2006} lays out a class of formulae called GR(1) that is $\mathcal{O}(N^3)$. This framework has been used extensively in robotic planning, for example in \cite{wong2012,Kress2007} and we do so here as well. We explicitly encode the surveillance requirement into the GR(1) formula to allow us to exploit the fast nature of GR(1) synthesis to solve a pursuit-evasion game. 

%However, we still have the issue of partial obsno ervability in our setting. The controller will need to choose actions even when the state of the adversary is not known. The standard approach to deal with the partial observability is by using a \emph{belief set construction} to reduce the problem to a full observability game \cite{Bertoli2006}. However, the number of belief states will be exponential in the number of states \cite{Rintanen2004} as the belief set construction takes a powerset of the number of states. In general, this scales poorly and is not usable in most practical situations. \todo{literature on other partial information reduction heuristics}. In this paper, to deal with this problem, we introduce \emph{abstract belief set construction}. This is an underapproximation of the true belief space and hence, if a controller is found, then we know a controller will exist in the fully refined belief space. If a controller is not found, we use counterexample guided abstract refinement (CEGAR) to split a belief set and the process is repeated. While CEGAR has been extensively used on abstract models for GR(1) reactive synthesis \cite{Alur2015,keylist}, to our knowledge it has not been used on belief state refinement in reducing a partial information game to a full information game. 

%The focus of this paper is to solve a modified pursuit-evasion game with additional LTL objectives in a partial information setting using reactive control synthesis. We propose a novel encoding of the surveillance requirement into the GR(1) specification to allow for assume guarantee control synthesis as well as a CEGAR approach in belief set construction in solving the partial information game. Our contributions in this paper are as follows:
%\begin{itemize}
%\item We encode the surveillance task as a safety specification which forces the agent to more closely follow the adversary in order to ensure the uncertainty (size of the belief set) on the location of adversary does not grow above the constraint.
%\item We also encode surveillance task as a liveness objective. This allows for the agent to be more relaxed in monitoring the location of the agent if it can ensure that it can see it again sometime in the future.
%\item We analyse the qualitatively different behaviour produced based on the specification type which allows the user to tailor the specification based on the requirements of the mission.
%\item Avoiding the state space blow up by abstract belief set construction and using counter example guided belief refinement for both the safety and liveness specification cases.
%\end{itemize}

%The rest of the paper is structured as follows. In section II we provide definitions and notations for partial-observation games and the encoding of the pursuit-evasion requirement as safety and liveness objectives in LTL. In section III, we present our belief set abstraction in reducing the partial information game to a full information and also detail the CEGAR process for the different types of objectives. In section IV we provide experiments on gridworlds along with a simulation in ROS using our proposed algorithm, and we conclude and provide future direction in section V. 
